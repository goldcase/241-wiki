<!doctype html>
<!--
  Material Design Lite
  Copyright 2015 Google Inc. All rights reserved.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      https://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License
-->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="A front-end template that helps you build fast, modern mobile web apps.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>C Programming: Review Questions</title>

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="icon" sizes="192x192" href="images/android-desktop.png">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Material Design Lite">
    <link rel="apple-touch-icon-precomposed" href="images/ios-desktop.png">

    <link rel="shortcut icon" href="images/favicon.png">

    <!-- SEO: If your mobile URL is different from the desktop URL, add a canonical link to the desktop page https://developers.google.com/webmasters/smartphone-sites/feature-phones -->
    <!--
    <link rel="canonical" href="http://www.example.com/">
    -->

    <link href='//fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en' rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
    <link rel="stylesheet" href="material.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/buttons-min.css">
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  </head>
  <body>
    <div class="demo-layout mdl-layout mdl-layout--fixed-header mdl-js-layout mdl-color--grey-100">
      <header class="demo-header mdl-layout__header mdl-layout__header--scroll mdl-color--grey-100 mdl-color-text--grey-800">
        <div class="mdl-layout__header-row">
        <span class="mdl-layout-title">C Programming: Review Questions</span>
          <div class="mdl-layout-spacer"></div>
        </div>
      </header>
      <div class="demo-ribbon"></div>
      <main class="demo-main mdl-layout__content">
        <div class="demo-container mdl-grid">
          <div class="mdl-cell mdl-cell--2-col mdl-cell--hide-tablet mdl-cell--hide-phone"></div>
          <div class="demo-content mdl-color--white mdl-shadow--4dp content mdl-color-text--grey-800 mdl-cell mdl-cell--8-col">
            <div class="demo-crumbs mdl-color-text--grey-500">
                CS 241 &gt; Wikibook &gt; C Programming: Review Questions
            </div>
            <h3>C Programming: Review Questions</h3>

<h2>Warning - question numbers subject to change</h2>
<h1>Memory and Strings</h1>
<h2>Q1.1</h2>
<p>In the example below, which variables are guaranteed to print the value of zero?</p>
<div class="highlight"><pre><span class="kt">int</span> <span class="n">a</span><span class="p">;</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">b</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">func</span><span class="p">()</span> <span class="p">{</span>
   <span class="k">static</span> <span class="kt">int</span> <span class="n">c</span><span class="p">;</span>
   <span class="kt">int</span> <span class="n">d</span><span class="p">;</span>
   <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d %d %d %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>


<h2>Q 1.2</h2>
<p>In the example below, which variables are guaranteed to print the value of zero?</p>
<div class="highlight"><pre><span class="kt">void</span> <span class="nf">func</span><span class="p">()</span> <span class="p">{</span>
   <span class="kt">int</span><span class="o">*</span> <span class="n">ptr1</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="p">);</span>
   <span class="kt">int</span><span class="o">*</span> <span class="n">ptr2</span> <span class="o">=</span> <span class="n">realloc</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="p">);</span>
   <span class="kt">int</span><span class="o">*</span> <span class="n">ptr3</span> <span class="o">=</span> <span class="n">calloc</span><span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="p">);</span>
   <span class="kt">int</span><span class="o">*</span> <span class="n">ptr4</span> <span class="o">=</span> <span class="n">calloc</span><span class="p">(</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

   <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d %d %d %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="o">*</span><span class="n">ptr1</span><span class="p">,</span><span class="o">*</span><span class="n">ptr2</span><span class="p">,</span><span class="o">*</span><span class="n">ptr3</span><span class="p">,</span><span class="o">*</span><span class="n">ptr</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>


<h2>Q 1.3</h2>
<p>Explain the error in the following attempt to copy a string.</p>
<div class="highlight"><pre><span class="kt">char</span><span class="o">*</span> <span class="nf">copy</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="n">src</span><span class="p">)</span> <span class="p">{</span>
 <span class="kt">char</span><span class="o">*</span><span class="n">result</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span> <span class="n">strlen</span><span class="p">(</span><span class="n">src</span><span class="p">)</span> <span class="p">);</span> 
 <span class="n">strcpy</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">src</span><span class="p">);</span> 
 <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<h2>Q 1.4</h2>
<p>Why does the following attempt to copy a string sometimes work and sometimes fail?</p>
<div class="highlight"><pre><span class="kt">char</span><span class="o">*</span> <span class="nf">copy</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="n">src</span><span class="p">)</span> <span class="p">{</span>
 <span class="kt">char</span><span class="o">*</span><span class="n">result</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span> <span class="n">strlen</span><span class="p">(</span><span class="n">src</span><span class="p">)</span> <span class="o">+</span><span class="mi">1</span> <span class="p">);</span> 
 <span class="n">strcat</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">src</span><span class="p">);</span> 
 <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<h2>Q 1.4</h2>
<p>Explain the two errors in the following code that attempts to copy a string.</p>
<div class="highlight"><pre><span class="kt">char</span><span class="o">*</span> <span class="nf">copy</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="n">src</span><span class="p">)</span> <span class="p">{</span>
 <span class="kt">char</span> <span class="n">result</span><span class="p">[</span><span class="k">sizeof</span><span class="p">(</span><span class="n">src</span><span class="p">)];</span> 
 <span class="n">strcpy</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">src</span><span class="p">);</span> 
 <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<h2>Q 1.5</h2>
<p>Which of the following is legal?</p>
<div class="highlight"><pre><span class="kt">char</span> <span class="n">a</span><span class="p">[]</span> <span class="o">=</span> <span class="s">&quot;Hello&quot;</span><span class="p">;</span> <span class="n">strcpy</span><span class="p">(</span><span class="s">&quot;World&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">);</span>
<span class="kt">char</span> <span class="n">b</span><span class="p">[]</span> <span class="o">=</span> <span class="s">&quot;Hello&quot;</span><span class="p">;</span> <span class="n">strcpy</span><span class="p">(</span><span class="s">&quot;World12345&quot;</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
<span class="kt">char</span><span class="o">*</span> <span class="n">c</span> <span class="o">=</span> <span class="s">&quot;Hello&quot;</span><span class="p">;</span> <span class="n">strcpy</span><span class="p">(</span><span class="s">&quot;World&quot;</span><span class="p">,</span> <span class="n">c</span><span class="p">);</span>
</pre></div>


<h2>Q 1.6</h2>
<p>Complete the function pointer typedef to declare a pointer to a function that takes a void<em> argument and returns a void</em>. Name your type 'pthread_callback'</p>
<div class="highlight"><pre><span class="k">typedef</span> <span class="n">______________________</span><span class="p">;</span>
</pre></div>


<h2>Q 1.7</h2>
<p>In addition to the function arguments what else is stored on a thread's stack?</p>
<h2>Q 1.8</h2>
<p>Implement a version of <code>char* strcat(char*dest, const char*src)</code> using only <code>strcpy</code>  <code>strlen</code> and pointer arithmetic</p>
<div class="highlight"><pre><span class="kt">char</span><span class="o">*</span> <span class="nf">mystrcat</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="n">dest</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span><span class="n">src</span><span class="p">)</span> <span class="p">{</span>

  <span class="o">?</span> <span class="n">Use</span> <span class="n">strcpy</span> <span class="n">strlen</span> <span class="n">here</span>

  <span class="k">return</span> <span class="n">dest</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<h2>Q 1.9</h2>
<p>Implement version of size_t strlen(const char*) using a loop and no function calls.</p>
<div class="highlight"><pre><span class="kt">size_t</span> <span class="nf">mystrlen</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span><span class="n">s</span><span class="p">)</span> <span class="p">{</span>

<span class="p">}</span>
<span class="cp">## Q 1.10</span>
<span class="n">Identify</span> <span class="n">the</span> <span class="n">three</span> <span class="n">bugs</span> <span class="n">in</span> <span class="n">the</span> <span class="n">following</span> <span class="n">implementation</span> <span class="n">of</span> <span class="err">`</span><span class="n">strcpy</span><span class="err">`</span><span class="p">.</span>
<span class="err">````</span><span class="n">C</span>
<span class="kt">char</span><span class="o">*</span> <span class="n">strcpy</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">dest</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">src</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">while</span><span class="p">(</span><span class="o">*</span><span class="n">src</span><span class="p">)</span> <span class="p">{</span> <span class="o">*</span><span class="n">dest</span><span class="o">++</span> <span class="o">=</span> <span class="o">*</span><span class="n">src</span><span class="o">++</span><span class="p">;</span> <span class="p">}</span>
  <span class="k">return</span> <span class="n">dest</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<h1>Printing</h1>
<h2>Q 2.1</h2>
<p>Spot the error!</p>
<div class="highlight"><pre><span class="n">fprintf</span><span class="p">(</span><span class="n">stdout</span><span class="p">,</span> <span class="s">&quot;You scored 100%&quot;</span><span class="p">);</span>
</pre></div>


<h1>Formatting and Printing to a file</h1>
<h2>Q 3.1</h2>
<p>Complete the following code to print to a file. Print the name, a comma and the score to the file 'result.txt'</p>
<div class="highlight"><pre><span class="kt">char</span><span class="o">*</span> <span class="n">name</span> <span class="o">=</span> <span class="p">.....;</span>
<span class="kt">int</span> <span class="n">score</span> <span class="o">=</span> <span class="p">......</span>
<span class="kt">FILE</span> <span class="o">*</span><span class="n">f</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="s">&quot;result.txt&quot;</span><span class="p">,</span><span class="n">_____</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">_____</span>
<span class="p">}</span>
<span class="n">fclose</span><span class="p">(</span><span class="n">f</span><span class="p">);</span>
</pre></div>


<h1>Printing to a string</h1>
<h2>Q 4.1</h2>
<p>How would you print the values of variables a,mesg,val and ptr to a string? Print a as an integer, mesg as C string, val as a double val and ptr as a hexadecimal pointer. You may assume the mesg points to a short C string(&lt;50 characters).<br />
Bonus: How would you make this code more robust or able to cope with?</p>
<div class="highlight"><pre><span class="kt">char</span><span class="o">*</span> <span class="nf">toString</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span><span class="n">mesg</span><span class="p">,</span> <span class="kt">double</span> <span class="n">val</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">ptr</span><span class="p">)</span> <span class="p">{</span>
   <span class="kt">char</span><span class="o">*</span> <span class="n">result</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span> <span class="n">strlen</span><span class="p">(</span><span class="n">mesg</span><span class="p">)</span> <span class="o">+</span> <span class="mi">50</span><span class="p">);</span>
    <span class="n">_____</span>
   <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<h1>Input parsing</h1>
<h2>Q 5.1</h2>
<p>Why should you check the return value of sscanf and scanf?</p>
<h2>Q 5.2</h2>
<p>Why is 'gets' dangerous?</p>
<h2>Q 5.3</h2>
<p>Write a complete program that uses <code>getline</code>. Ensure your program has no memory leaks.</p>
<h2>Heap memory</h2>
<p>When would you use calloc not malloc? <br />
When would realloc be useful?</p>
<p>(Todo - move this question to another page)<br />
What mistake did the programmer make in the following code? Is it possible to fix it i) using heap memory? ii) using global (static) memory?</p>
<div class="highlight"><pre><span class="k">static</span> <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>

<span class="kt">char</span><span class="o">*</span> <span class="nf">next_ticket</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">id</span> <span class="o">++</span><span class="p">;</span>
  <span class="kt">char</span> <span class="n">result</span><span class="p">[</span><span class="mi">20</span><span class="p">];</span>
  <span class="n">sprintf</span><span class="p">(</span><span class="n">result</span><span class="p">,</span><span class="s">&quot;%d&quot;</span><span class="p">,</span><span class="n">id</span><span class="p">);</span>
  <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>          </div>
        </div>
      </main>
    </div>
    <script src="check_mc.js"></script>
  </body>
</html>