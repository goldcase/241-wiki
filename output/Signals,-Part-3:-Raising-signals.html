<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
	<link rel="stylesheet" href="style.css">
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
</head>
<body>
<h2>How do I send a signal to a process from the shell?</h2>
<p>You already know one way to send a <code>SIG_INT</code> just type <code>CTRL-C</code> <br />
From the shell you can use <code>kill</code> (if you know the process id) and <code>killall</code> (if you know the process name)</p>
<div class="highlight"><pre># First let&#39;s use ps and grep to find the process we want to send a signal to
$ ps au | grep myprogram
angrave  4409   0.0  0.0  2434892    512 s004  R+    2:42PM   0:00.00 myprogram 1 2 3

#Send SIGINT signal to process 4409 (equivalent of `CTRL-C`)
$ kill -SIGINT 4409

#Send SIGKILL (terminate the process)
$ kill -SIGKILL 4409
$ kill -9 4409
</pre></div>


<p><code>killall</code> is similar except that it matches by program name. The next two example, sends a <code>SIGINT</code> and then <code>SIGKILL</code> to terminate the processes that are running <code>myprogram</code></p>
<div class="highlight"><pre># Send SIGINT (SIGINT can be ignored)
$ killall -SIGINT myprogram

# SIGKILL (-9) cannot be ignored! 
$ killall -9 myprogram
</pre></div>


<h2>How do I send a signal to a process from the running C program?</h2>
<p>Use <code>raise</code> or <code>kill</code></p>
<div class="highlight"><pre><span class="kt">int</span> <span class="nf">raise</span><span class="p">(</span><span class="kt">int</span> <span class="n">sig</span><span class="p">);</span> <span class="c1">// Send a signal to myself!</span>
<span class="kt">int</span> <span class="nf">kill</span><span class="p">(</span><span class="kt">pid_t</span> <span class="n">pid</span><span class="p">,</span> <span class="kt">int</span> <span class="n">sig</span><span class="p">);</span> <span class="c1">// Send a signal to another process</span>
</pre></div>


<p>For non-root processes, signals can only be sent to processes of the same user i.e. you cant just SIGKILL my processes! See kill(2) i.e. man -s2 for more details.</p>
<h2>How do I send a signal to a specific thread?</h2>
<p>Use <code>pthread_kill</code></p>
<div class="highlight"><pre><span class="kt">int</span> <span class="n">pthread_kill</span><span class="p">(</span><span class="kt">pthread_t</span> <span class="kr">thread</span><span class="p">,</span> <span class="kt">int</span> <span class="n">sig</span><span class="p">)</span>
</pre></div>


<p>In the example below, the newly created thread executing <code>func</code> will be interrupted by <code>SIGINT</code></p>
<div class="highlight"><pre><span class="n">pthread_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tid</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">args</span><span class="p">);</span>
<span class="n">pthread_kill</span><span class="p">(</span><span class="n">tid</span><span class="p">,</span> <span class="n">SIGINT</span><span class="p">);</span>
<span class="n">pthread_kill</span><span class="p">(</span><span class="n">pthread_self</span><span class="p">(),</span> <span class="n">SIGKILL</span><span class="p">);</span> <span class="c1">// send SIGKILL to myself</span>
</pre></div>


<h2>Will <code>pthread_kill( threadid, SIGKILL)</code> kill the process or thread?</h2>
<p>It will kill the entire process. Though individual threads can set a signal mask, the signal disposition (the table of handlers/action performed for each signal) is <em>per-proces</em>s not <em>per-thread</em>. This means <br />
<code>sigaction</code> can be called from any thread because you will be setting a signal handler for all threads in the process.</p>
<h2>How do I catch (handle) a signal ?</h2>
<p>You can choose a handle pending signals asynchronously or synchronously.</p>
<p>Install a signal handler to asynchronously handle signals use <code>sigaction</code> (or, for simple examples, <code>signal</code> ).</p>
<p>To synchronously catch a pending signal use <code>sigwait</code> (which blocks until a signal is delivered) or <code>signalfd</code> (which also blocks and provides a file descriptor that can be <code>read()</code> to retrieve pending signals).</p>
<p>See <code>Signals, Part 4</code> for an example of using <code>sigwait</code></p>
    <script src="check_mc.js"></script>
</body>
</html>
</body>
</html>
